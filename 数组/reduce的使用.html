<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>reduce的使用</title>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		// 基本语法
		let nums = [1, 2, 1, 1, 2, 3, 4];
		nums.reduce(function(pre, value, index, array) {
			return pre;
		}, 0);
		// 例一：找出数组当中某一元素出现的次数
		function count(array, item) {
			return array.reduce(function(total, value){
				total += value === item ? 1 : 0;
				return total;
			}, 0);
		}
		console.log(count(nums, 1));
		// 例二：找出数组当中最大的元素
		function maxElem(array) {
			return array.reduce(function (max, value) {
				return max > value ? max : value;
			}, -10000000000000000);
		}
		console.log(maxElem(nums));
		let cart = [
			{name: 'iphone', price: 8000},
			{name: 'imac', price: 12000},
			{name: 'ipda', price: 3000}
		];
		// 例三：找出购物车中最贵的商品
		function maxPrice(array) {
			return array.reduce(function(pre, cur){
				return pre.price > cur.price ? pre : cur;
			});
		}
		console.log(maxPrice(cart));
		// 例四：算出所有的商品总价
		function sum(array) {
			return array.reduce(function(total, good){
				return total += good.price;
			}, 0);
		}
		console.log(sum(cart));
		// 例五：获取超过某一价格的商品的名称
		function getNameByPrice(array, price) {
			return array.reduce(function(arr, good) {
				if (good.price > price) {
					arr.push(good);
				}
				return arr;
			}, []).map(function(item){
				return item.name;
			});
		}
		console.table(getNameByPrice(cart, 10000));
		// 例六:去重(基本数据类型)
		let newNums = nums.reduce(function(arr, value) {
			if (arr.includes(value) === false) {
				arr.push(value);
			}
			return arr;
		}, []);
		console.table(newNums);
		// 例七:去重复的商品
		let cart2 = [
			{name: 'iphone', price: 8000},
			{name: 'iphone', price: 8000},
			{name: 'imac', price: 12000},
			{name: 'imac', price: 12000},
			{name: 'ipda', price: 3000},
			{name: 'ipda', price: 3000}
		];
		function filerGood(goods) {
			return goods.reduce(function(arr, value) {
				let temp = arr.find(function(v) {
					return v.name === value.name;
				});
				if (!temp) arr.push(value);
				return arr;
			}, []); 
		}
		console.log(filerGood(cart2));
	</script>
</html>
